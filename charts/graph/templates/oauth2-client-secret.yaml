{{ $clientId := (index (index .Values "oauth2-proxy").alphaConfig.configData.providers 0).clientId }}
{{- if eq $clientId "graph" }}
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  annotations:
    authn.diamond.ac.uk/client-id: {{ $clientId }}
    sealedsecrets.bitnami.com/namespace-wide: "true"
  name: "{{ .Release.Name }}-oauth2-client"
  namespace: graph
spec:
  template:
    type: Opaque
    metadata:
      annotations:
        authn.diamond.ac.uk/client-id: {{ $clientId }}
        sealedsecrets.bitnami.com/namespace-wide: "true"
      name: "{{ .Release.Name }}-oauth2-client"
      namespace: graph
  encryptedData:
    secret: AgBaJEZJtRSb1Mcf9AR63Zj2j5G2HB8Kdv90qbuGSWY9mDH3/5hoXDCOOV6nfWsTLOuxXFlbo5YYFpqK13DEQMqk6F/jDwq359EdMGp9D8FAP1OFxKJYPIRFJTpZK1iMf2AZ3BY0hNftntNoW1+AVd4VSZA1J5Bl/2256HemRiBwLb/vaGdyLvtvC8Fy6FOni4BqkKJmZV8G9bjT9j64sydSgiiQUyR/T73b0rOrKVPTTl88wYOD2jadPuCanO4rHanoXvQqSZAu2kGIusNFEKOqmDWumf4fMENUFLKrk3CsFd8l90ooECBCVKk/KBdvIuk0P9EOKO5e0X241AlcMZge1HlCHO+zCeSyaqAGQrklbXOu2b197ayH5GERxkPjjB8g3emcm/SWEeZSeLC6fZrgqEH/v7gF6e5JYLfHyObcAHzJ8vhXA+ayovbQWkfRQ5uA5cTHWHf6rIMe9c94P+jywpQOxb6eHWmYzvbqynG6Ecm/PtUrI/tIln5O+hTbxSjSsVIOYvOGeMd3ebg40TiHoq+RppFPaxe3JEn9CmP16AplRmi8sN2WyATldgm/Z8tkIuTFtn6+6DejB+gCUN+knnN0mZxgpUWElq7l/5yLjEcVkCjJjYNFSjBsnr35q7ow8w5DzT8S+NBW/yfAN/cR+gI7DeRrB20J0am+qRIBQYF9/Ajj6iD/Heyt2Wb3yrkjl1GjnwPk7F+VU/rJvw1BtVU+rQHrCUK02QB0FjtcAA==
{{- else if eq $clientId "graph-nightly" -}}
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  annotations:
    authn.diamond.ac.uk/client-id: {{ $clientId }}
    sealedsecrets.bitnami.com/namespace-wide: "true"
  name: "{{ .Release.Name }}-oauth2-client"
  namespace: graph
spec:
  template:
    metadata:
      annotations:
        authn.diamond.ac.uk/client-id: {{ $clientId }}
        sealedsecrets.bitnami.com/namespace-wide: "true"
      name: "{{ .Release.Name }}-oauth2-client"
      namespace: graph
  encryptedData:
    secret: AgA6/IYqQWV6VQUIcoGepulN/uZ8LllwUZbn6usAcZj0nRY7aflTAFLaxb/kJZH3ElI/NYteY6/e0eApOAAb4c5qonH5EqG0WkoXbYjFUDOnmFehJ1WQ302REEgela1BfhaTHNoU1zAc/uqUJ9HJLAcNAQsIUHuoI6iKm05Aq6Wc3GlAvCzqGP5te9kGCEjKwAKmOGiHL+i7sQ1/2TX1DAgHPLR07zwt6qHJeVaQyyi/lwQT8Hn3eCQ2bEnfYYKTeNI+1zGHLfpYHkhw3ANHNVn8pvLJRoDA8jMeVvxE+Vw2RzP+fJ78lyDMf/wQdfv/vQCU14+0zJyV9s85LFplWwLBq3vW3g0jgsHHDyjDnysNNsXETUBSOtU/xp4iAQMqU90xpYA6vEAi+RwHJ8Lav/6kIGqWxrdjzqPcvZ3Xpycx0oFmEFfSeMq51+b3yKSyP8nC2yiL0OWMOt6/b6HxIFLpoNQ297DJE87fiEuQUWkmIrC0a4SSuiRYxJQ/tGYodOucQGOqIkns88M1l1yI4dMarqaVueGbW3cwvejnUY8MI8sQeeQkamgUqpe/ufgkVAFYy4KSgyUOISAx5AfIER1VK7enqlL7HbIALU0W7dllgJnNZC/MIXPTERF1NFRxS0jtcdkm/9gjRy/BSewfy7R+rSiAbIz3qeteg3IcPSWOqisiyHl9RP1E3xnJmJAibtJuGgO3vkSiserf1kzvAKFZ9YZ3V9pbh9julAG3B8BZLw==
{{- end }}
